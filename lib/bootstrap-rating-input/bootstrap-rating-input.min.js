(function(e){e.fn.rating=function(){function n(t,n){var r=e(t).find("[data-value="+n+"]");r.removeClass("glyphicon-star-empty").addClass("glyphicon-star");r.prevAll("[data-value]").removeClass("glyphicon-star-empty").addClass("glyphicon-star");r.nextAll("[data-value]").removeClass("glyphicon-star").addClass("glyphicon-star-empty")}function r(t){var n=e(t);n.find("[data-value]").removeClass("glyphicon-star").addClass("glyphicon-star-empty")}function i(e,t){e.val(t).trigger("change");if(t===e.data("empty-value")){e.siblings(".rating-clear").hide()}else{e.siblings(".rating-clear").show()}}var t;for(t=this.length-1;t>=0;t--){var s,o,u=e(this[t]),a=u.data("max")||5,f=u.data("min")||0,l=u.data("clearable")||null,c="";for(o=f;o<=a;o++){c+=['<span class="glyphicon glyphicon-star-empty" data-value="',o,'"></span>'].join("")}if(l){c+=[' <a class="rating-clear" style="display:none;" href="javascript:void">','<span class="glyphicon glyphicon-remove"></span> ',l,"</a>"].join("")}var h=u.clone(true).attr("type","hidden").data("max",a).data("min",f);s=['<div class="rating-input">',c,"</div>"].join("");u.replaceWith(e(s).append(h))}e(".rating-input").on("mouseenter","[data-value]",function(){var t=e(this);n(t.closest(".rating-input"),t.data("value"))}).on("mouseleave","[data-value]",function(){var t=e(this),i=t.siblings("input"),s=i.val(),o=i.data("min"),u=i.data("max");if(s>=o&&s<=u){n(t.closest(".rating-input"),s)}else{r(t.closest(".rating-input"))}}).on("click","[data-value]",function(t){var n=e(this),r=n.data("value"),s=n.siblings("input");i(s,r);t.preventDefault();return false}).on("click",".rating-clear",function(t){var n=e(this),s=n.siblings("input");i(s,s.data("empty-value"));r(n.closest(".rating-input"));t.preventDefault();return false}).each(function(){var t=e(this).find("input"),i=t.val(),s=t.data("min"),o=t.data("max");if(i!==""&&+i>=s&&+i<=o){n(this,i);e(this).find(".rating-clear").show()}else{t.val(t.data("empty-value"));r(this)}})};e(function(){if(e("input.rating[type=number]").length>0){e("input.rating[type=number]").rating()}})})(jQuery)